{% extends "base.html" %}

{% block title %}
    {{ 'Editar Serviço' if service else 'Novo Serviço' }} | Admin
{% endblock %}

{% block content %}
<div class="row">
    {# Inclui a barra lateral de navegação da administração #}
    {% include "admin/admin_sidebar.html" %}
    
    <div class="col-md-9">
        
        <h1 class="h2 mb-5 text-warning fw-light border-bottom border-warning pb-2"> {# Alterado h2 para h1 #}
            <i class="fas fa-tools me-2" aria-hidden="true"></i> 
            {{ 'Editar Serviço: ' ~ service.nome if service else 'Cadastrar Novo Serviço' }}
        </h1>
        
        <div class="card bg-dark shadow-epic border border-secondary">
            <div class="card-body p-4 p-md-5"> {# Adicionado p-md-5 para padding em telas maiores #}
                
                {% set form_action = url_for('admin.edit_service', service_id=service.id) if service else url_for('admin.new_service') %}
                <form method="POST" action="{{ form_action }}" aria-label="{{ 'Formulário de Edição de Serviço' if service else 'Formulário de Cadastro de Serviço' }}">
                    
                    <div class="mb-4">
                        <label for="nome" class="form-label text-pro-muted fw-bold"> {# Alterado text-white-50 para text-pro-muted #}
                            <i class="fas fa-tag me-2 text-warning" aria-hidden="true"></i> Nome do Serviço:
                        </label>
                        <input type="text" 
                               class="form-control bg-dark border-secondary text-pro" 
                               id="nome" 
                               name="nome" 
                               value="{{ service.nome or '' }}" 
                               placeholder="Ex: Corte Clássico, Massagem Terapêutica"
                               required>
                    </div>
                    
                    <div class="mb-4">
                        <label for="duracao" class="form-label text-pro-muted fw-bold">
                            <i class="fas fa-hourglass-half me-2 text-warning" aria-hidden="true"></i> Duração (Minutos):
                        </label>
                        <input type="number" 
                               class="form-control bg-dark border-secondary text-pro" 
                               id="duracao" 
                               name="duracao" 
                               value="{{ service.duracao or '' }}" 
                               required 
                               min="1" 
                               step="1" {# Garantindo que seja um número inteiro #}
                               placeholder="Ex: 60 (para 1 hora)">
                        <div class="form-text text-muted">A duração é usada para calcular os horários livres na agenda.</div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="descricao" class="form-label text-pro-muted fw-bold">
                            <i class="fas fa-info-circle me-2 text-warning" aria-hidden="true"></i> Descrição do Serviço:
                        </label>
                        <textarea class="form-control bg-dark border-secondary text-pro" 
                                  id="descricao" 
                                  name="descricao" 
                                  rows="4" 
                                  placeholder="Detalhes do que o cliente irá receber e quaisquer notas importantes.">{{ service.descricao or '' }}</textarea>
                        <div class="form-text text-muted">Esta descrição aparecerá para o cliente na página de agendamento.</div>
                    </div>
                    
                    <div class="mt-4 pt-3 border-top border-secondary">
                        <button type="submit" class="btn btn-warning fw-bold me-3">
                            <i class="fas fa-save me-2" aria-hidden="true"></i> 
                            {{ 'Salvar Alterações' if service else 'Criar Serviço' }}
                        </button>
                        <a href="{{ url_for('admin.manage_services') }}" class="btn btn-secondary">
                            <i class="fas fa-times me-2" aria-hidden="true"></i> Cancelar
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}