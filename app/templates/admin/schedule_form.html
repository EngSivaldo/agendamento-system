{% extends "base.html" %}

{% block title %}
    {{ 'Editar Horário' if schedule and schedule.id else 'Novo Horário' }} | Admin
{% endblock %}

{% block content %}
<div class="row">
    {% include "admin/admin_sidebar.html" %}
    
    <div class="col-md-9">
        
        <h2 class="mb-5 text-warning fw-light border-bottom border-warning pb-2">
            <i class="fas fa-calendar-plus me-2"></i> 
            {{ 'Editar Bloco de Horário' if schedule and schedule.id else 'Cadastrar Novo Bloco de Horário' }}
        </h2>
        
        <div class="card bg-dark shadow-epic border border-secondary">
            <div class="card-body p-4">
                
                {% set form_action = url_for('admin.edit_schedule', schedule_id=schedule.id) if schedule and schedule.id else url_for('admin.new_schedule') %}
                <form method="POST" action="{{ form_action }}">
                    
                    <div class="mb-4">
                        <label for="dia_semana" class="form-label text-white-50 fw-bold">
                            <i class="fas fa-calendar-day me-2 text-warning"></i> Dia da Semana:
                        </label>
                        <select class="form-select bg-dark text-white border-secondary" id="dia_semana" name="dia_semana" required>
                            {% for key, value in dias_semana_map.items() %}
                                <option value="{{ key }}" 
                                    {% if (schedule and schedule.dia_semana == key) or (not schedule and loop.first) %}selected{% endif %}>
                                    {{ value }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label for="hora_inicio" class="form-label text-white-50 fw-bold">
                            <i class="fas fa-clock me-2 text-warning"></i> Hora de Início:
                        </label>
                        <input type="time" class="form-control bg-dark text-white border-secondary" id="hora_inicio" name="hora_inicio" 
                               value="{{ schedule.hora_inicio if schedule and schedule.hora_inicio else '09:00' }}" required>
                    </div>
                    
                    <div class="mb-4">
                        <label for="hora_fim" class="form-label text-white-50 fw-bold">
                            <i class="fas fa-hourglass-end me-2 text-warning"></i> Hora de Fim:
                        </label>
                        <input type="time" class="form-control bg-dark text-white border-secondary" id="hora_fim" name="hora_fim" 
                               value="{{ schedule.hora_fim if schedule and schedule.hora_fim else '18:00' }}" required>
                    </div>
                    
                    <div class="mt-4 pt-3 border-top border-secondary">
                        <button type="submit" class="btn btn-warning fw-bold me-3">
                            <i class="fas fa-save me-2"></i> 
                            {{ 'Salvar Alterações' if schedule and schedule.id else 'Cadastrar Bloco' }}
                        </button>
                        <a href="{{ url_for('admin.manage_schedules') }}" class="btn btn-secondary">
                            <i class="fas fa-times me-2"></i> Cancelar
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}